# ==Surge.conf==
# @ConfigName     Surgeé…ç½®æ–‡ä»¶
# @Author         Chris
# @UpdateTime     2023/05/25 12:00 UTC/GMT +8
# @Version        1.0
# @ConfigURL      
# @Description    Surge VIF è™šæ‹Ÿç½‘å¡(Virtual Network Interface, ç®€å†™ä¸ºVIF)

# Changelog
# [+]2023-05-23 1.åˆå§‹åŒ–é…ç½®æ–‡ä»¶
# [+]2023-05-25 2.ä¼˜åŒ–ä»£ç†å’Œç­–ç•¥ç»„
# [+]2023-05-30 3.æ•´ç†æ³¨é‡Š

[General]
# ---é€šç”¨---
# > ç½‘ç»œä¼˜åŒ–
# - å¹¶å‘ DNS æŸ¥è¯¢
# - Optimistic DNS
# - TCP CDN ä¼˜åŒ–
# - å¢å¼ºç‰ˆ Wi-Fi åŠ©ç†
# åœ¨ Wi-Fi ç½‘ç»œä¸ä½³æ—¶å°è¯•ä½¿ç”¨æ•°æ®ç½‘ç»œå»ºç«‹è¿æ¥,è¯·ä»…å½“ä½¿ç”¨ä¸é™é‡çš„æ•°æ®æµé‡æ—¶å¼€å¯
wifi-assist = false
# - æ··åˆç½‘ç»œ
all-hybrid = false
# - æ¸¸æˆä¼˜åŒ–
# å¼€å¯åå°†åœ¨ç³»ç»Ÿè´Ÿè½½éå¸¸é«˜,æ•°æ®åŒ…å¤„ç†å‡ºç°å»¶è¿Ÿæ—¶,ä¼˜å…ˆå¤„ç† UDP æ•°æ®åŒ…
udp-priority = false

# > å»¶è¿Ÿæµ‹è¯•
# - INTERNET æµ‹è¯• URL
# ä½¿ç”¨ç½‘ç»œè¯Šæ–­åŠŸèƒ½æ—¶è®¿é—®çš„ URL
internet-test-url = http://wifi.vivo.com.cn/generate_204
# - ä»£ç†æµ‹é€Ÿ URL
# æµ‹è¯•ä»£ç†ç­–ç•¥æ—¶çš„ URL
proxy-test-url = http://cp.cloudflare.com/generate_204
# - æµ‹è¯•è¶…æ—¶(ç§’)
# Surge å°†å‘è¯¥ URL å‘é€ä¸€ä¸ª HTTP HEAD è¯·æ±‚æµ‹è¯•åªå…³å¿ƒæ˜¯å¦æ”¶åˆ°äº†è¿”å›æ•°æ®,å¹¶ä¸å…³å¿ƒæ•°æ®å†…å®¹
# ä»…æ”¯æŒ http:// åè®®
test-timeout = 3

# > å­ç½‘è®¾ç½®è¦†ç›–

# > GeoIP æ•°æ®åº“
# - è‡ªå®šä¹‰ GEOIP æ•°æ®åº“ URL
geoip-maxmind-url = https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb

# > IPv6
# - IPv6
ipv6 = false
# - IPv6 VIF
# å…è®¸ IPv6 é€šè¿‡ Surge VIFå½“å¸Œæœ› Surge å¤„ç†è¿æ¥åˆ° IPv6 åœ°å€çš„åŸå§‹ TCP è¿æ¥æ—¶éå¸¸æœ‰ç”¨
# true / false / auto / always
# ipv6-vif = auto

# ---Wi-Fi è®¿é—®---
# > å…è®¸ Wi-Fi è®¿é—®
# ä»… ios,è‹¥å…è®¸è¿œç¨‹è®¿é—®å°† false æ”¹ä¸º true
allow-wifi-access = false
# > å…è®¸ä¸ªäººçƒ­ç‚¹è®¿é—®
allow-hotspot-access = false
# > HTTP ä»£ç†æœåŠ¡ç«¯å£
wifi-access-http-port = 6152
# > SOCKS5 ä»£ç†æœåŠ¡ç«¯å£
wifi-access-socks5-port = 6153
# > å…è®¸ Wi-Fi è®¿é—®
# ä»… macos,è‹¥å…è®¸è¿œç¨‹è®¿é—®å°† 127.0.0.1 æ”¹ä¸º 0.0.0.0
http-listen = 0.0.0.0
socks5-listen = 0.0.0.0

# ---è¿œç¨‹æ§åˆ¶å™¨---
# > è¿œç¨‹æ§åˆ¶å™¨
# - è¿œç¨‹æ§åˆ¶å™¨
# - ç«¯å£ å¯†ç 
external-controller-access = chris@127.0.0.1:6170
# - å…è®¸ç”± Wi-Fi æ§åˆ¶
# > HTTP API & Web æ§åˆ¶å™¨
# - HTTP API
# HTTP API å¯ä»¥è®©å¦ä¸€ä¸ª App æˆ–è€…è®¾å¤‡é€šè¿‡ HTTP API æ§åˆ¶ Surge åŠŸèƒ½
http-api-tls = false
# - ç«¯å£ å¯†ç 
http-api = chris@127.0.0.1:6166
# - å…è®¸ç”± Wi-Fi æ§åˆ¶
# - HTTPS
# - Web æ§åˆ¶å™¨
http-api-web-dashboard = false

# ---å…¼å®¹æ€§---
# > å…¼å®¹æ¨¡å¼
# ä»… ios, é»˜è®¤ç¦ç”¨
compatibility-mode = 0
# > è·³è¿‡ä»£ç†
# è¯¥é€‰é¡¹å°†ä½¿å¾—å‘å¾€è¿™äº›åŸŸåæˆ–è€… IP æ®µçš„è¯·æ±‚ç”± Surge VIF è¿›è¡Œå¤„ç†(è€Œä¸æ˜¯ Surge Proxy),è¯¥é€‰é¡¹ç”¨äºä¿®æ­£å’ŒæŸäº›åº”ç”¨çš„å…¼å®¹æ€§é—®é¢˜è¯¥é€‰é¡¹ä¸€èˆ¬åªç”¨äºå¤„ç†æŸäº›ç‰¹æ®Šçš„å…¼å®¹æ€§é—®é¢˜, å¹¶ä¸èƒ½ä½¿è¯·æ±‚ç»•è¿‡ Surge(å¯¹äº Surge Mac, å¦‚æœæœªå¼€å¯ å¢å¼ºæ¨¡å¼,ç¡®å®å¯ä»¥ç»•è¿‡)
skip-proxy = 127.0.0.1/32, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, 169.254.0.0/16, 192.168.122.1/32, 193.168.0.1/32, 224.0.0.0/4, 240.0.0.0/4, 255.255.255.255/32, localhost, *.local, *.crashlytics.com, passenger.t3go.cn, captive.apple.com, seed-sequoia.siri.apple.com, sequoia.apple.com, injections.adguard.org, local.adguard.org
# > æ’é™¤ç®€å•ä¸»æœºå
# ä»… macos
exclude-simple-hostnames = true

# ---è·¯ç”±---
# > åŒ…å«æ‰€æœ‰ç½‘ç»œè¯·æ±‚
# å¼ºåˆ¶æ‰€æœ‰ç½‘ç»œæ•°æ®ç”± Surge å¤„ç†,åœ¨æœªå¼€å¯çš„æƒ…å†µä¸‹,ç½‘ç»œåˆ‡æ¢æ—¶çš„ç½‘ç»œè¯·æ±‚æœ‰å¯èƒ½ä¸è¢« Surge å¤„ç†,app ä¹Ÿå¯ä»¥é€šè¿‡å¼ºåˆ¶ç»‘å®šç‰©ç†ç½‘ç»œé€‚é…å™¨çš„æ–¹å¼ç»•è¿‡
# å¼€å¯åæ‰€æœ‰é™¤æœ¬åœ°å±€åŸŸç½‘å¤–çš„ç½‘ç»œæµé‡ä¸€å®šéƒ½å°†ç”± Surge æ‰€å¤„ç†, ä¸å¯ç»•è¿‡
include-all-networks = false
# > åŒ…å«æœ¬åœ°ç½‘ç»œè¯·æ±‚
# include-local-networks ä»…åœ¨ include-all-networks å¼€å¯æ—¶æœ‰æ•ˆ,å°†æ— è§†è·¯ç”±è¡¨,å°†æ‰€æœ‰æœ¬åœ°æµé‡ä¹Ÿäº¤ç”± Surge æ‰€å¤„ç†
include-local-networks = false

# [é«˜çº§]
# > æ—¥å¿—ç­‰çº§
loglevel = notify
# > Show Reject Error Page
# å½“é‡åˆ°REJECTç­–ç•¥æ—¶è¿”å›é”™è¯¯é¡µ
show-error-page-for-reject = true
# > Always Real IP Hosts
# å½“Surge VIFå¤„ç†DNSé—®é¢˜æ—¶,è¦æ±‚Surgeè¿”å›çœŸå®IPåœ°å€
always-real-ip = *.msftconnecttest.com,*.msftncsi.com,  *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, stun.l.google.com
# > Hijack DNS
# hijack-dns = *:53
hijack-dns = 8.8.8.8:53, 8.8.4.4:53
# > TCP Force HTTP Hosts
# è®© Surge æŠŠ TCP è¿æ¥å½“ä½œ HTTP è¯·æ±‚æ¥å¤„ç†
# Surge HTTP å¼•æ“å°†å¤„ç†è¿™äº›è¯·æ±‚
# æ‰€æœ‰çš„é«˜çº§åŠŸèƒ½,å¦‚æ•è·,é‡å†™å’Œè„šæœ¬ç­‰éƒ½å¯ä»¥ä½¿ç”¨
# force-http-engine-hosts = *.ott.cibntv.net, 123.59.31.1,119.18.193.135, 122.14.246.33, 175.102.178.52, 116.253.24.*, 175.6.26.*, 220.169.153.*
# ä»…é€‚ç”¨äº Surge VIF
# > VIF Excluded Routes
# Surge VIF åªèƒ½å¤„ç† TCP å’Œ UDP åè®®
# ä½¿ç”¨æ­¤é€‰é¡¹ç»•è¿‡ç‰¹å®šçš„ IP èŒƒå›´,ä»¥å…è®¸æ‰€æœ‰æµé‡é€šè¿‡
# tun-excluded-routes = 239.255.255.250/32
# > VIF Included Routes
# ç”±äº Wi-Fi æ¥å£çš„è·¯ç”±è¾ƒå°,ä¸€äº›æµé‡å¯èƒ½æ— æ³•é€šè¿‡ Surge VIF æ¥å£
# æ·»åŠ è¾ƒå°çš„è·¯ç”±
# tun-included-routes = 192.168.1.12/32
# å½“ Wi-Fi ä¸æ˜¯é¦–é€‰ç½‘ç»œæ—¶ SSID ç»„ç­–ç•¥ä½¿ç”¨é»˜è®¤ç­–ç•¥
use-default-policy-if-wifi-not-primary = false

# [DNS]
# > DNS æœåŠ¡å™¨
# > è‡ªå®šä¹‰ DNS æœåŠ¡å™¨
# å¦‚æ— å¿…è¦ä¸å»ºè®®ä½¿ç”¨DNS over HTTPS
dns-server = system, 119.29.29.29, 119.28.28.28, 223.5.5.5, 223.6.6.6, 1.2.4.8, 8.8.8.8
# > åŠ å¯† DNS
# å¦‚æœé…ç½®äº†åŠ å¯† DNS, ä¼ ç»Ÿ DNS å°†ä»…ç”¨ä½œè§£æ DOH åŸŸåå’Œæµ‹è¯•ç½‘ç»œè¿é€šæ€§
# æ”¯æŒçš„åè®®
# DNS over HTTPS: https://doh.pub/dns-query
# DNS over HTTP/3: h3://example.com
# DNS over QUIC: quic://example.com
# é™¤éå½“åœ° ISP æœ‰ä¸¥é‡çš„ DNS æ±¡æŸ“é—®é¢˜,å¦åˆ™æ²¡å¿…è¦å¼€å¯ DoH,ä¼ ç»Ÿ DNS çš„æ€§èƒ½æœ€ä¼˜,ç½‘ç»œå¼‚å¸¸åæ¢å¤é€Ÿåº¦æœ€å¿«
# encrypted-dns-server = https://doh.pub/dns-query
# > å…³é—­ DOH çš„æœåŠ¡ç«¯è¯ä¹¦éªŒè¯
# å…³é—­ DOH çš„æœåŠ¡ç«¯è¯ä¹¦éªŒè¯(è§£å†³ Surge æ— æ³•ä¸ nextdns.io å®Œæˆ TLS æ¡æ‰‹é—®é¢˜)
# doh-skip-cert-verification=true
# > ä»£ç†è¯·æ±‚æœ¬åœ° DNS æ˜ å°„
# å¼€å¯è¯¥é€‰é¡¹å, å¦‚æœè®¿é—®çš„åŸŸåé…ç½®æœ‰æœ¬åœ° DNS æ˜ å°„,surge å°†ä½¿ç”¨æœ¬åœ° IP åœ°å€è¿›è¡Œè¯·æ±‚,ä¸åœ¨è¿œç«¯è¿›è¡Œè§£æä»…å¯¹é…ç½®äº† IP åœ°å€çš„æœ¬åœ° DNS æ˜ å°„ç”Ÿæ•ˆ
# use-local-host-item-for-proxy = true
# > ä½¿åŠ å¯† DNS è¯·æ±‚é€šè¿‡ä»£ç†ç­–ç•¥æ‰§è¡Œ
# encrypted-dns-follow-outbound-mode = false
# > Surge Private DDNS
# > ä»£ç†è¯·æ±‚æœ¬åœ° DNS æ˜ å°„
# > ä»… macos ä» /etc/hosts è¯»å– DNS è®°å½•
read-etc-hosts = true

# [å…¶ä»–]
# > éšè— VPN å›¾æ ‡
hide-vpn-icon = false
# æ§åˆ¶å½“ UDP æµé‡è¢«åŒ¹é…åˆ°ä¸€ä¸ªä¸æ”¯æŒ UDP è½¬å‘çš„ç­–ç•¥æ—¶çš„è¡Œä¸º
# - DIRECT: å›é€€åˆ° DIRECT ç­–ç•¥(é»˜è®¤)
# - REJECT: å›é€€åˆ° REJECT ç­–ç•¥
# å¦‚æœæ²¡æœ‰ä»£ç†æœåŠ¡å™¨æ”¯æŒ UDP è½¬å‘,å¯ä¿®æ”¹ä¸º direct æˆ–æ³¨é‡Šä¸‹æ¡,ä½†éœ€æ³¨æ„åŒä¸€ç›®æ ‡ä¸»æœºå TCP è¯·æ±‚ä¸ UDP è¯·æ±‚çš„æºåœ°å€ä¸åŒæ‰€é€ æˆçš„éšç§åŠå®‰å…¨é£é™©
udp-policy-not-supported-behaviour = REJECT

[Replica]
# [æŠ“å–]
# ---æŠ“å–æµé‡---
# > è¿‡æ»¤å™¨
# > éšè— Apple è¯·æ±‚
# éšè—æ‰€æœ‰å‘å¾€.Apple.comå’Œ.icloud.comçš„è¯·æ±‚, 0 ä¸ºå…³é—­, 1 ä¸ºå¼€å¯
hide-apple-request = 1
# > éšè—å´©æºƒè¿½è¸ªå™¨è¯·æ±‚
# Crashlytics
hide-crash-reporter-request = 1
# > éšè— UDP ä¼šè¯
hide-udp = 1
# > å…³é”®è¯è¿‡æ»¤å™¨
# none å…³é—­å…³é”®è¯è¿‡æ»¤å™¨ / whitelist ä»…è®°å½•åŒ…å«å…³é”®å­—çš„è¯·æ±‚ / blacklist(ä»…è®°å½•ä¸åŒ…å«å…³é”®å­—çš„è¯·æ±‚ / pattern åŒ¹é…é€šé…ç¬¦çš„è¯·æ±‚
keyword-filter-type = none
# > å…³é”®è¯
# keyword-filter = (null)

[Proxy]
# [ä»£ç†]
# > ç›´è¿
Direct = direct
# > æ‹’ç»
Reject = reject

[Proxy Group]
# [ç­–ç•¥ç»„]
# ---ç­–ç•¥ç»„ç±»å‹---
# > select, url-test, fallback, ssid, load-balance
# - select: å…·ä½“å“ªä¸ªå­ç­–ç•¥å°†è¢«ä½¿ç”¨,ç”±ç”¨æˆ·ç•Œé¢ä¸Šè¿›è¡Œé€‰æ‹©
# - url-test: å…·ä½“å“ªä¸ªå­ç­–ç•¥å°†è¢«ä½¿ç”¨,é€šè¿‡æµ‹è¯•åˆ°å…·ä½“ URL çš„è®¿é—®é€Ÿåº¦é€‰æ‹©å»¶è¿Ÿæœ€ä½çš„ç­–ç•¥
# url: æµ‹è¯•æ—¶ç”¨åˆ°çš„ç›®æ ‡ URL.
# interval: å¯é€‰,ç§’(é»˜è®¤å€¼:600s),æŒ‡å®šåœ¨å¤šé•¿æ—¶é—´å,ä¸Šæ¬¡çš„æµ‹è¯•ç»“æœå°†è¢«æŠ›å¼ƒ
# tolerance: å¯é€‰,æ¯«ç§’(é»˜è®¤å€¼:100ms),åªæœ‰å½“æ–°çš„ä¼˜é€‰çº¿è·¯,æ¯”åŸä¼˜é€‰çº¿è·¯çš„å“åº”æ—¶é—´,å¤§äºè¯¥å€¼çš„æ—¶å€™,æ‰ä¼šè§¦å‘çº¿è·¯å˜æ›´
# timeout: å¯é€‰,ç§’(é»˜è®¤å€¼:5s),å¦‚æœæŸç­–ç•¥åœ¨è¯¥æ—¶é—´åä¾ç„¶æ²¡æœ‰å®Œæˆ,æ”¾å¼ƒè¯¥ç­–ç•¥
# - fallback: ä¸ url-test ç»„åŸºæœ¬ä¸€è‡´,åŒºåˆ«æ˜¯åªå…³å¿ƒå­ç­–ç•¥æ˜¯å¦å¯ç”¨è€Œä¸å…³å¿ƒå…·ä½“å»¶è¿Ÿ,ç„¶åä»å¯ç”¨ç­–ç•¥ä¸­é€‰æ‹©é å‰çš„ç­–ç•¥,å¯ä»¥é€šè¿‡è°ƒå° timeout å‚æ•°å°†ç¼“æ…¢çº¿è·¯ä¹Ÿæ ‡è®°ä¸ºä¸å¯ç”¨
# è¯¥ç±»å‹æ²¡æœ‰ tolerance å‚æ•°
# - ssid: å…·ä½“å“ªä¸ªå­ç­–ç•¥å°†è¢«ä½¿ç”¨,æ ¹æ® Wi-FI çš„ SSID/BSSIDã€è·¯ç”± IP åœ°å€å†³å®š
# default: å¿…å¡«,é»˜è®¤ç­–ç•¥
# cellular: å¯é€‰,åœ¨æ•°æ®ç½‘ç»œä¸‹çš„ç­–ç•¥,è‹¥ä¸å¡«,é‚£ä¹ˆé»˜è®¤ç­–ç•¥å°†è¢«ä½¿ç”¨
# - load-balance: éšæœºä»å­ç­–ç•¥ä¸­é€‰å–ä¸€ä¸ªç­–ç•¥ä½¿ç”¨ã€‚å½“é…ç½®äº† url å‚æ•°æ—¶,ä¼šæŒ‰ç…§ fallback ç»„çš„è¡Œä¸ºè¿›è¡Œå¯ç”¨æ€§æ£€æŸ¥,ç„¶åä»…ä»å¯ç”¨çš„å­ç­–ç•¥ä¸­éšæœºé€‰å–
# url,timeout,interval
# persistent: å½“ persistent=true æ—¶,å¯¹äºåŒä¸€ç›®æ ‡ä¸»æœºå,å°†å°½é‡ä½¿ç”¨åŒä¸€ä¸ªç­–ç•¥,é¿å…å› å‡ºå£ IP ä¸åŒè€Œè§¦å‘ç›®æ ‡ç½‘ç«™çš„é£é™©æ§åˆ¶,ä½†å½“å¯ç”¨æ€§æ”¹å˜æ—¶å¯èƒ½å¯¼è‡´ç­–ç•¥å˜åŒ–

# > ç­–ç•¥
Proxy = select, HK, US, JP, TW
Streaming = select, Direct, HK, US, JP, TW
OpenAI = select, Direct, Proxy, HK, US, JP, TW
Gamer = select, Direct, Proxy, HK, US, JP, TW
Emby = select, Direct, Proxy, HK, US, JP, TW
Final = select, Direct, Proxy
Guard = select, Reject, Direct

# > åœ°åŒºèŠ‚ç‚¹
HK = select, policy-regex-filter=(ğŸ‡­ğŸ‡°)|(æ¸¯)|(Hong)|(HK), no-alert=0, hidden=0, include-all-proxies=0, include-other-group=ExtSample
TW = select, policy-regex-filter=(ğŸ‡¨ğŸ‡³)|(å°)|(Tai)|(TW), no-alert=0, hidden=0, include-all-proxies=0, include-other-group=ExtSample
US = select, policy-regex-filter=(ğŸ‡ºğŸ‡¸)|(ç¾)|(States)|(US), no-alert=0, hidden=0, include-all-proxies=0, include-other-group=ExtSample
JP = select, policy-regex-filter=(ğŸ‡¯ğŸ‡µ)|(æ—¥)|(Japan)|(JP), no-alert=0, hidden=0, include-all-proxies=0, include-other-group=ExtSample
# > å¤–éƒ¨èŠ‚ç‚¹
ExtSample = select, policy-path=https://sub.store/download/collection/MySub, update-interval=0, interval=600, timeout=3, no-alert=0, hidden=0, include-all-proxies=0

[Rule]
# [è§„åˆ™]
# ---åŸŸåè§„åˆ™---
# > ç»•è¿‡ä¼ä¸šè¯ä¹¦è¿‡æœŸ
DOMAIN,ocsp.apple.com,Direct
# > æŠ–éŸ³æœ¬åœ°åˆ†æµ
DOMAIN-SUFFIX,snssdk.com,Direct
DOMAIN-SUFFIX,amemv.com,Direct
# > å…¶å®ƒ
DOMAIN-SUFFIX,local,Direct
# Sub-Store çš„ Web é¡µé¢
DOMAIN-SUFFIX,vercel.app,Proxy
# æ–°å¢å†…ç½®ç­–ç•¥ NO-HYBRID,ç­‰ä»·ä¸º NO-HYBRID = direct, hybrid=off
# éƒ¨åˆ†æœåŠ¡ä¼šæ ¡éªŒè¯·æ±‚çš„æ¥æº IP,åœ¨å¼€å¯ hybrid æ—¶æœ‰å¯èƒ½å› ä¸ºè¯·æ±‚IPå˜åŒ–å¯¼è‡´æ— æ³•æ­£å¸¸ç™»å½•å’Œä½¿ç”¨(å¦‚æ‹›å•†é“¶è¡Œ),å¯ä½¿ç”¨ NO-HYBRID å¯¹ç‰¹å®šè¯·æ±‚å•ç‹¬å…³é—­ All Hybrid
DOMAIN-SUFFIX,cmbchina.com,NO-HYBRID

# ---é€»è¾‘è§„åˆ™---
# > ANDè§„åˆ™:å½“æ‰€å«è§„åˆ™å…¨éƒ¨åŒ¹é…æ—¶, ä¼šè¢«è§¦å‘
# HTTP3/QUIC åè®®åŸºäº UDP,éƒ¨åˆ†åœ°åŒº ISP æˆ–çº¿è·¯ UDP å®¹æ˜“å—åˆ°å¹²æ‰°æˆ–é™é€Ÿ,å±è”½æ‰ä»¥é˜»æ­¢ HTTP 3 æµé‡çš„ UDP æµé‡,å¼ºåˆ¶å›é€€åˆ° TCP
# REJECT-NO-DROP è¡¨ç¤ºä¸ä½¿ç”¨é»˜è®¤çš„è‡ªåŠ¨ä¸¢åŒ…é€»è¾‘,è¿™æ · Surge æ¯æ¬¡éƒ½ä¼šè¿”å› ICMP Port Unreachable,åº”ç”¨ä¼šç«‹åˆ»å›é€€è€Œä¸æ˜¯ç­‰è¶…æ—¶
AND,((PROTOCOL,UDP), (DEST-PORT,443)),REJECT-NO-DROP
# ---è¿›ç¨‹è§„åˆ™---
# ä»… macos ç”Ÿæ•ˆ, ios ä¼šè‡ªåŠ¨å¿½ç•¥è¿™ä¸ªç±»å‹çš„è§„åˆ™
# > Proxy
PROCESS-NAME,v2ray,Direct
PROCESS-NAME,ss-local,Direct
PROCESS-NAME,UUBooster,Direct
# Download
PROCESS-NAME,aria2c,Direct
PROCESS-NAME,fdm,Direct
PROCESS-NAME,Folx,Direct
PROCESS-NAME,NetTransport,Direct
PROCESS-NAME,Thunder,Direct
PROCESS-NAME,Transmission,Direct
PROCESS-NAME,uTorrent,Direct
PROCESS-NAME,WebTorrent,Direct
PROCESS-NAME,WebTorrent Helper,Direct

# > æ›´æ–°å¤–éƒ¨èµ„æº
AND,((DOMAIN,raw.githubusercontent.com), (DOMAIN-SUFFIX,github.io), (USER-AGENT,Surge/*)),Final,notification-text="External Resources Update",notification-interval=3600
# ---è¿œç¨‹è§„åˆ™é›†---
# > Unbreak åç»­è§„åˆ™ä¿®æ­£
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Unbreak.list,Direct
# > Advertising å¹¿å‘Š
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Advertising.list,Guard
DOMAIN-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/AdvertisingPlus.list,Guard
# > Hijacking è¿è¥å•†åŠ«æŒæˆ–æ¶æ„ç½‘ç«™
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Hijacking.list,Guard
# > Streaming å›½é™…æµåª’ä½“æœåŠ¡
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Streaming.list,Streaming
# > Global å…¨çƒåŠ é€Ÿ
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Global.list,Proxy
# > Apple æœåŠ¡
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Apple/Apple.list,Direct
# > China ä¸­å›½ç›´è¿
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/China.list,Direct

# é˜²æ­¢åº”ç”¨å¾ªç¯è¯·æ±‚
IP-CIDR,0.0.0.0/32,REJECT,no-resolve

# ---å†…ç½®è§„åˆ™é›†---
# > SYSTEM
# åŒ…å«äº†ç»å¤§å¤šæ•°æ¥è‡ª macos å’Œ ios ç³»ç»Ÿæœ¬èº«æ‰€å‘é€çš„è¯·æ±‚
RULE-SET,SYSTEM,DIRECT

# Local Area Network & GeoIP China
# ä»¥ä¸‹è§„åˆ™å°†è§¦å‘æœ¬åœ° DNS è§£æ
OR,((RULE-SET,SYSTEM), (RULE-SET,LAN), (GEOIP,CN)),DIRECT
# > Final
# DNS æŸ¥è¯¢å¤±è´¥èµ° Final è§„åˆ™
FINAL,Final,dns-failed

[Host]
# DNS
# å®šä¹‰æœ¬åœ° DNS è®°å½•,ç­‰åŒäº /etc/hosts,åŠ ä¸Šäº†æ³›è§£æå’Œåˆ«åæ”¯æŒ
# Firebase Cloud Messaging
mtalk.google.com = 108.177.125.188

# Google Dl
dl.google.com = server:119.29.29.29
dl.l.google.com = server:119.29.29.29
update.googleapis.com = server:119.29.29.29

# > PlayStation
*.dl.playstation.net = server:119.29.29.29

# Router Admin Panel
amplifi.lan = server:syslib // Ubiquiti Amplifi Router
router.synology.com = server:syslib // Synology Router
sila.razer.com = server:syslib // Razer Sila Router
router.asus.com = server:syslib // Asus Router
routerlogin.net = server:syslib // Netgear Router
orbilogin.com = server:syslib // Netgear Obri Router
www.LinksysSmartWiFi.com = server:syslib // Linksys Router
LinksysSmartWiFi.com = server:syslib // Linksys Router
myrouter.local = server:syslib // Linksys Router
www.miwifi.com = server:syslib // Xiaomi Mi WiFi Router
miwifi.com = server:syslib // Xiaomi Mi WiFi Router
mediarouter.home = server:syslib // Huawei Router
tplogin.cn = server:syslib // TP-Link Router
tplinklogin.net = server:syslib // TP-Link Router
melogin.cn = server:syslib // MERCURY Router
falogin.cn = server:syslib // FAST Router

# CUSTOM HOST

[URL Rewrite]
# [Rewrite]
# è¯¥æ®µå®šä¹‰é’ˆå¯¹ HTTP è¯·æ±‚çš„ URL é‡å®šå‘è§„åˆ™
# å»ºè®®ç”¨æ¨¡å—
# ä¸¤ç§é‡å®šå‘æ–¹å¼: header / 302
# Header æ¨¡å¼
# Surge ä¼šä¿®æ”¹å‘å‡ºçš„ http header, å¿…è¦æ—¶è¿˜ä¼šä¿®æ”¹ Host å­—æ®µå®¢æˆ·ç«¯å°†æ„ŸçŸ¥ä¸åˆ°è¿™ä¸ªé‡å®šå‘è¿‡ç¨‹, ä¸æ”¯æŒé‡å®šå‘åˆ°ä¸€ä¸ª HTTPS çš„åœ°å€
# 302 æ¨¡å¼
# Surge ç›´æ¥ç®€å•çš„è¿”å›ä¸€ä¸ª 302 é‡å®šå‘å›åº”

[Header Rewrite]
^https?:\/\/.*\.zhihu\.com\/(question|topic) header-replace User-Agent "osee2unifiedRelease/4432 osee2unifiedReleaseVersion/7.8.0 Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mo    bile/15E148"

[SSID Setting]
# [SSID]
# ä»… ios
# > suspend: true / false
# åœ¨è¯¥ç½‘ç»œä¸‹ Surge å°†æš‚åœå·¥ä½œ,è¯·æ³¨æ„,å¦‚æœä½ åœ¨è¯¥ç½‘ç»œä¸‹ç›´æ¥å¯åŠ¨ Surge,é‚£ä¹ˆ Surge ä¾ç„¶ä¼šå·¥ä½œ,åªæœ‰å½“ä»å…¶ä»–ç½‘ç»œåˆ‡æ¢åˆ°è¯¥ç½‘ç»œæ—¶,Surge æ‰ä¼šæš‚åœ
# > MCCMNC:100-200 åŒ¹é…ç‰¹å®šæ•°æ®ç½‘ç»œ
# > SSID:value ç‰¹å®šåŒ¹é… SSIDï¼Œæ”¯æŒé€šé…ç¬¦
# > BSSID:value ç‰¹å®šåŒ¹é… BSSIDï¼Œæ”¯æŒé€šé…ç¬¦
# > ROUTER:value ç‰¹å®šåŒ¹é…è·¯ç”±åœ°å€
# > TYPE:WIFI åŒ¹é…æ‰€æœ‰ WiFi ç½‘ç»œ
# > TYPE:CELLULAR åŒ¹é…æ‰€æœ‰æ•°æ®ç½‘ç»œ
# > TYPE:WIRED åŒ¹é…æ‰€æœ‰æœ‰çº¿ç½‘ç»œï¼ˆiOS ä¸Šæ”¯æŒ USB ç½‘ç»œé€‚é…
# > cellular-fallback: å¯å•ç‹¬æ§åˆ¶ä¸€äº› Wi-Fi ä¸‹çš„ all-hybrid å’Œ wifi-assist è¡Œä¸º
# - cellular-fallback=default ä½¿ç”¨ [General] ä¸­çš„ all-hybrid å’Œ wifi-assist é…ç½®
# - cellular-fallback=off å…³é—­ all-hybrid å’Œ wifi-assist
# - cellular-fallback=hybrid å¼€å¯ all-hybrid 
# - cellular-fallback=wifi-assist å¼€å¯ wifi-assist
# ä»ä¸Šè‡³ä¸‹ä¾æ¬¡åŒ¹é…,åŒ¹é…åˆ°ç¬¬ä¸€ä¸ªç»“æœåç«‹åˆ»ç»ˆæ­¢
# ä¸­å›½ç”¨æˆ·è‹¥ä½¿ç”¨ TFO å»ºè®®å¼ºåˆ¶å…³é—­æ•°æ®ç½‘ç»œä¸Šçš„ TFO,é¿å…äº§ç”Ÿé—®é¢˜,ç„¶ååœ¨å·²æµ‹è¯•è¿‡çš„ç½‘ç»œä¸Šå¼ºåˆ¶å¼€å¯
# > Temporarily Suspend
# "1402" suspend=true
# > TCP Fast Open
# "1402" tfo-behaviour=force-enabled
TYPE:CELLULAR tfo-behaviour=force-disabled

[MITM]
# [MitM]
# > è·³è¿‡æœåŠ¡ç«¯è¯ä¹¦éªŒè¯
skip-server-cert-verify = true
# > é…ç½®æ ¹è¯ä¹¦
# > è¯ä¹¦
# > ç”¨äº TCP è¿æ¥
tcp-connection = false
# > MITM over HTTP/2
# ä½¿ç”¨ HTTP/2 åè®®è¿›è¡Œ MITM è§£å¯†, å¯åœ¨é«˜å¹¶å‘ä¸‹ä¼˜åŒ–æ€§èƒ½
# h2 = true
# > ä¸»æœºå
# Surge ä»…ä¼šè§£å¯†è¿™é‡ŒæŒ‡å®šçš„ä¸»æœºåçš„è¯·æ±‚, ios ç³»ç»Ÿå’ŒæŸäº›åº”ç”¨æœ‰ä¸¥æ ¼çš„å®‰å…¨ç­–ç•¥, ä»…ä¿¡ä»»æŸäº›ç‰¹å®šçš„è¯ä¹¦, å¯¹è¿™äº›åŸŸåå¯åŠ¨è§£å¯†å¯èƒ½å¯¼è‡´é—®é¢˜, å¦‚ *apple.com, *icloud.com.
# hostname = www.google.cn, api.abema.io, *.zhihu.com, -CUSTOMMitM

[Script]
# [è„šæœ¬]
# æ˜¾ç¤ºè¿è¡Œæ—¶é—´åŠMitMç­‰åŠŸèƒ½å¼€å…³çŠ¶æ€
EDC_Surge-Panel = type=generic,script-path=https://raw.githubusercontent.com/erdongchanyo/Rules/main/Surge/Panels/EDC_Surge-Panel.js,argument=icon=crown.fill&color=#f6c970
# Flush DNS, show the DNS delay and server.
flushDNS = type=generic,timeout=10,script-path=https://raw.githubusercontent.com/zZPiglet/Task/master/asset/flushDNS.js,argument=icon=wand.and.stars.inverse&color=#3d3d5b

[Panel]
flushDNS = script-name=flushDNS,update-interval=-1
